---
title: "EASports WRC C++ datalogger"
date: "2024-06-19"
slug: "EA-sports-WRC-datalogger"
tags: ["SimRacing", "Software"]
categories: ["Projects"]
draft: false
---

# Posts
1. [UDP link to EA Sports WRC][udpeasportswrc]
2. [Driver input widget][inputwindow]
3. [Brake Pedal and Brake Temperature][BrakeStageAndData]
# Intro
EASports WRC is a rally sim racing game developed by EA, its the successor of the Dirt Rally series and a pretty cool game to play
As my day to day job is in automotive, I have a special interest in sim racing games.
And since I'm an engineer, I have a special interest in data :sunglasses:

Luckily, EA released an API that allows the user to check data generated by the game via a UDP connection.
After having the data available, we need to figure out a way to display it and to store it.

In the past, I used this [dirt rally 2 datalogger][dr2_logger] developed by Philipp Erler in Python for the dirt rally game series (in my case I only used it for dirt rally 2).

For my use case I wanted it to do multiple things:
1. See the data live
2. Store the data for latter review
3. Represent the data in meaning full widgets

# Design Choices
Before starting I had to choose the tools that I wanted to use to develop such a program.
At the time, I found this pretty cool [video][WalnutTheCherno] from The Cherno about a framework his team build called [Walnut] built on top of ImGui. It seemed to fit quite well to my target and it was well documented.
I wanted to store the data gathered in an ASAM MDF file, which is a standard file format defined by [Association for Standardization of Automation and Measuring Systems][ASAM_MDF], and there are some libraries for it written in C++ available online, however I was not able to make compile properly, so I shifted to use .Yaml files and Yaml cpp to store and read data.


{{< figure src="/images/WRCDatalogger.png" alt="Example Layout" caption="Example Layout" width="100%" >}}

The layout is fully customizable, which means you can chose what you're seeing and have whatever layout you would like to see.

I will be writing posts about the progress [here][Posts] and will do an instructables in the near future so keep an eye on it.

Here are some of the windows available:

{{< figure src="/images/DataSignals.png" alt="All signals display" caption="All signals display" width="100%" >}}
The signal plots allow the user to check available signals of the current run or older runs (by uploading an YAML file)
You can configure the number of plots in whatever configuration suits you.

The Stage status serves as a control panel it shows the current stage time, the distance until the stage end and has two buttons.
{{< figure src="/images/StageStatusAndControl.png" alt="Control Panel" caption="Control Panel" width="100%" >}}
The `Store Run` button allows the user to store the current run into an YAML file. The `Clear Run` button allows the user to clear the current data, in case you want a reset.

The vehicle position allow the user to have an Idea of where you are on the stage. At the end of a run it should look similar to the trace of the stage at the game menu.

{{< figure src="/images/VehiclePosition.png" alt="Vehicle Position" caption="Vehicle Position" width="100%" >}}


If you like my projects please consider supporting my hobby by [buying me a coffee][buymeacoffee]:coffee: :smile:

[buymeacoffee]: https://buymeacoffee.com/Carlos4lmeida
[dr2_logger]: https://github.com/ErlerPhilipp/dr2_logger
[WalnutTheCherno]: https://youtu.be/-NJDxf4XwlQ
[Walnut]: https://github.com/StudioCherno/Walnut
[ASAM_MDF]: https://www.asam.net/standards/detail/mdf/
[Posts]: /posts/
[udpeasportswrc]:/posts/udpeasportswrc/
[inputwindow]:/posts/EASportsWRCDriverInput/
[BrakeStageAndData]:/posts/BrakeStageAndSignals/
